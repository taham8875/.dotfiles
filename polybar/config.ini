; ============================================
; Polybar Configuration for i3
; Modern, minimal dark theme with accent colors
; ============================================

[colors]
; Background and foreground
background = #1e1e2e
background-alt = #181825
foreground = #cdd6f4

; Primary accent color (purple/mauve theme)
primary = #cba6f7
primary-alt = #a6e3a1

; Module-specific colors
module-bg = #313244
module-bg-alt = #45475a

; Status colors
good = #a6e3a1
warning = #f9e2af
bad = #f38ba8
critical = #eba0ac

; Workspace colors
ws-focused = #cba6f7
ws-visible = #89b4fa
ws-urgent = #f38ba8
ws-empty = #6c7086

; ============================================
; Bar Settings
; ============================================
[bar/main]
; Bar dimensions and position
width = 100%
height = 38
offset-x = 0
offset-y = 0
radius = 0.0

; Background and foreground
background = ${colors.background}
foreground = ${colors.foreground}

; Fonts (Nerd Font required for icons)
; Increased sizes for 118% scaling (10->11.8, 12->14.16, 16->18.88)
font-0 = "JetBrainsMono Nerd Font:size=11.8:style=Regular;2"
font-1 = "JetBrainsMono Nerd Font:size=14.16:style=Bold;2"
font-2 = "JetBrainsMono Nerd Font:size=18.88:style=Bold;2"

; Module positioning
modules-left = i3
modules-center = 
modules-right = cpu memory temperature volume mic network battery date

; Padding (top, right, bottom, left)
padding-left = 2
padding-right = 2
padding-top = 2
padding-bottom = 2

; Border settings
border-size = 0
border-color = ${colors.background}

; Tray settings (if needed)
; Note: Tray settings moved to dedicated tray module if needed
; tray-position = right
; tray-padding = 2
; tray-background = ${colors.background}

; Enable IPC (for external commands)
enable-ipc = true

; ============================================
; Module: i3 Workspaces
; Displays and manages i3 workspaces
; ============================================
[module/i3]
type = internal/i3
format = <label-state> <label-mode>
index-sort = true
wrapping-scroll = false

; Label for focused workspace
label-focused = %index%
label-focused-background = ${colors.module-bg}
label-focused-foreground = ${colors.ws-focused}
label-focused-padding = 2
label-focused-font = 1

; Label for visible but unfocused workspace
label-unfocused = %index%
label-unfocused-foreground = ${colors.ws-visible}
label-unfocused-padding = 2

; Label for urgent workspace
label-urgent = %index%
label-urgent-background = ${colors.ws-urgent}
label-urgent-foreground = ${colors.background}
label-urgent-padding = 2

; Label for empty workspace
label-empty = %index%
label-empty-foreground = ${colors.ws-empty}
label-empty-padding = 2

; Separator between workspaces
label-separator = |
label-separator-foreground = ${colors.module-bg-alt}
label-separator-padding = 2

; ============================================
; Module: CPU Usage
; Shows current CPU usage percentage
; ============================================
[module/cpu]
type = internal/cpu
interval = 2
format = <label>
label = 󰻠  %percentage:2%%

; Color based on usage
format-foreground = ${colors.foreground}
format-background = ${colors.module-bg}
format-padding = 2

; ============================================
; Module: Memory (RAM)
; Shows current RAM usage
; ============================================
[module/memory]
type = internal/memory
interval = 2
format = <label>
label = 󰍛  %gb_used:0%/%gb_total:0%

format-foreground = ${colors.foreground}
format-background = ${colors.module-bg}
format-padding = 2

; ============================================
; Module: Temperature
; Shows CPU/system temperature
; ============================================
[module/temperature]
type = internal/temperature
interval = 2
thermal-zone = 0
warn-temperature = 60
format = <label>
format-warn = <label-warn>
format-warn-foreground = ${colors.warning}
label = 󰔏  %temperature-c%

format-foreground = ${colors.foreground}
format-background = ${colors.module-bg}
format-padding = 2

; ============================================
; Module: Volume (PulseAudio)
; Shows volume with mute indicator
; ============================================
[module/volume]
type = internal/pulseaudio

; Volume format - shows percentage instead of bar
format-volume = <label-volume>
label-volume = 󰕾  %percentage%%
label-volume-foreground = ${colors.primary}
label-volume-background = ${colors.module-bg}
label-volume-padding = 2

; Mute format
format-muted = <label-muted>
label-muted = 󰝟  muted
label-muted-foreground = ${colors.bad}
label-muted-background = ${colors.module-bg}
label-muted-padding = 2

; Click actions
; Note: For pulseaudio internal module, click-left defaults to mute toggle
; We override it using format-click on the label
format-click = /home/taha/.config/polybar/scripts/open-volume.sh
click-right = /home/taha/.config/polybar/scripts/open-volume.sh
click-middle = pactl set-sink-mute @DEFAULT_SINK@ toggle
scroll-up = pactl set-sink-volume @DEFAULT_SINK@ +5%
scroll-down = pactl set-sink-volume @DEFAULT_SINK@ -5%

; ============================================
; Module: Microphone Input (PulseAudio)
; Shows microphone input volume with controls
; ============================================
[module/mic]
type = custom/script
exec = /home/taha/.config/polybar/scripts/mic-volume.sh
interval = 2
format = <label>
label = %output%
format-foreground = ${colors.primary}
format-background = ${colors.module-bg}
format-padding = 2

; Click actions
click-left = /home/taha/.config/polybar/scripts/open-volume.sh
click-right = /home/taha/.config/polybar/scripts/open-volume.sh
click-middle = pactl set-source-mute @DEFAULT_SOURCE@ toggle
scroll-up = pactl set-source-volume @DEFAULT_SOURCE@ +5%
scroll-down = pactl set-source-volume @DEFAULT_SOURCE@ -5%

; ============================================
; Module: Network
; Shows Wi-Fi and Ethernet connection status
; ============================================
[module/network]
type = internal/network
interface = wlp0s20f3
interval = 3.0
format-connected = <label-connected>
format-disconnected = <label-disconnected>
label-connected = 󰤨  %essid%
label-disconnected = 󰤭  disconnected
label-connected-foreground = ${colors.good}
label-connected-background = ${colors.module-bg}
label-connected-padding = 2
label-disconnected-foreground = ${colors.bad}
label-disconnected-background = ${colors.module-bg}
label-disconnected-padding = 2

; Click actions
click-left = /home/taha/.config/polybar/scripts/open-network.sh

; Alternative: Ethernet interface
; Uncomment and modify if you use Ethernet instead or want both
; [module/network-ethernet]
; type = internal/network
; interface = eth0
; interval = 3.0
; format-connected = <label-connected>
; format-disconnected = <label-disconnected>
; label-connected = 󰈀  %local_ip%
; label-disconnected = 󰈀  disconnected
; label-connected-foreground = ${colors.good}
; label-connected-background = ${colors.module-bg}
; label-connected-padding = 2
; label-disconnected-foreground = ${colors.bad}
; label-disconnected-background = ${colors.module-bg}
; label-disconnected-padding = 2

; ============================================
; Module: Battery
; Shows battery status (laptop only)
; Automatically disabled if not on a laptop
; ============================================
[module/battery]
type = internal/battery
battery = BAT0
adapter = AC
full-at = 98

; Charging format
format-charging = <label-charging>
label-charging = 󰂄  %percentage% 󱐋
label-charging-foreground = ${colors.primary-alt}
label-charging-background = ${colors.module-bg}
label-charging-padding = 2

; Discharging format
format-discharging = <label-discharging>
label-discharging = <ramp-capacity>  %percentage%
label-discharging-foreground = ${colors.foreground}
label-discharging-background = ${colors.module-bg}
label-discharging-padding = 2

; Full format
format-full = <label-full>
label-full = 󰁹  100%
label-full-foreground = ${colors.good}
label-full-background = ${colors.module-bg}
label-full-padding = 2

; Battery icons based on capacity
ramp-capacity-0 = 󰂎
ramp-capacity-1 = 󰁺
ramp-capacity-2 = 󰁻
ramp-capacity-3 = 󰁼
ramp-capacity-4 = 󰁽
ramp-capacity-5 = 󰁾
ramp-capacity-6 = 󰁿
ramp-capacity-7 = 󰂀
ramp-capacity-8 = 󰂁
ramp-capacity-9 = 󰂂
ramp-capacity-10 = 󰁹

; Low battery warning
format-low = <label-low>
label-low = 󰂃  %percentage% 󰁹
label-low-foreground = ${colors.warning}
label-low-background = ${colors.module-bg}
label-low-padding = 2
low-at = 20

; Click actions
click-left = /home/taha/.config/polybar/scripts/open-power.sh

; ============================================
; Module: Date & Time
; Shows current date and time
; ============================================
[module/date]
type = internal/date
interval = 5
date = %a %d %b  %I:%M %p
label = 󰥔  %date%
format-foreground = ${colors.foreground}
format-background = ${colors.module-bg}
format-padding = 2

; ============================================
; Module: Keyboard Layout Indicator
; Shows current keyboard layout (EN/AR)
; ============================================
; (keyboard-layout module removed)


; ============================================
; Global Settings
; ============================================
[settings]
screenchange-reload = true
pseudo-transparency = false

; ============================================
; Launcher Module (Optional)
; Uncomment and add to modules-right if desired
; ============================================
; [module/launcher]
; type = custom/script
; exec = echo "󰣇"
; click-left = rofi -show drun &
; format-foreground = ${colors.primary}
; format-background = ${colors.module-bg}
; format-padding = 2

; ============================================
; Power Menu Module (Optional)
; Uncomment and add to modules-right if desired
; ============================================
; [module/powermenu]
; type = custom/menu
; expand-right = true
; format-spacing = 1
; label-open = 󰐥
; label-open-foreground = ${colors.bad}
; label-close = 󰅜 cancel
; label-separator = |
; menu-0-0 = reboot
; menu-0-0-exec = systemctl reboot
; menu-0-1 = power off
; menu-0-1-exec = systemctl poweroff
; menu-0-2 = cancel
; menu-0-2-exec = menu-open-0
